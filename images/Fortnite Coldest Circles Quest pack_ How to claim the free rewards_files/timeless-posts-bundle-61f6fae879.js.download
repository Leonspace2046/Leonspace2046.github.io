function showHideTimelessSectionByPosts(e,s){s&&(!e.length&&s?s.classList.add("hidden"):s&&Array.from(s.classList).indexOf("hidden")&&s.classList.remove("hidden"))}function adjustTimelessPostContainerWidth(e,s,t){s&&t&&(1===e.length&&(s.style.maxWidth="100%",$(".one-story").classList.add("full-width")),isOverflow(s)?0<=Array.from(t.classList).indexOf("hidden")&&t.classList.remove("hidden"):Array.from(t.classList).indexOf("hidden")<0&&t.classList.add("hidden"))}function addTimelessPostScrollListener(e,s,t){e&&s&&t&&e.addEventListener("scroll",function(){0<e.scrollLeft&&0<=Array.from(t.classList).indexOf("hidden")&&t.classList.remove("hidden"),e.scrollLeft<=0&&Array.from(t.classList).indexOf("hidden")<0&&t.classList.add("hidden"),e.scrollWidth-e.scrollLeft===e.offsetWidth?Array.from(s.classList).indexOf("hidden")<0&&s.classList.add("hidden"):0<=Array.from(s.classList).indexOf("hidden")&&s.classList.remove("hidden")})}function slideLeftTimelessPosts(){sideScrollTimelessPost("left",10,540,15)}function slideRightTimelessPosts(){sideScrollTimelessPost("right",10,540,15)}function sideScrollTimelessPost(e,s,t,i){var o=$("#timeless-posts-list"),n=$(".timeless-posts-anchors #left"),r=(scrollAmount=0,setInterval(function(){"right"==e?o.scrollLeft-=i:o.scrollLeft+=i,(scrollAmount+=i)>=t&&window.clearInterval(r),0===o.scrollLeft&&n.classList.add("hidden")},s));0<=Array.from(n.classList).indexOf("hidden")&&n.classList.remove("hidden")}function timelessPostGaEvent(e,s,t,i,o,n,r){e=getTimelessPostsImpressionSequence(e,"timeless-posts-list"),t={event_name:"Timeless clicked",post_id:t,sport_category:i,title:o.replace(/-/gi," "),taxonomy:n,page_type:pageType,sequence:e};"author"==s?t.author_slug=r:t.url=r,gtag("event","Timeless clicked",t)}function getTimelessPostsImpressionSequence(e,s){return Array.from($("#"+s).children).slice().indexOf(e.parentElement)+1}function isInViewport(e){e=e.getBoundingClientRect();return 0<=e.top&&0<=e.left&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function trackTimelessPostImpressions(r){var e=$all(".timeless-story"),s=new IntersectionObserver(function(e){e.forEach(function(e){var s,t,i,o,n;e.target&&e.isIntersecting&&!(e.intersectionRatio<1)&&e.target.dataset&&(s=e.target.dataset.postId,t=e.target.dataset.postSlug,i=e.target.dataset.postSportCategorySlug,o=e.target.dataset.postTaxonomy,n=getTimelessPostsImpressionSequence(e.target.firstElementChild,"timeless-posts-list"),s&&setTimeout(function(e){isInViewport(e)&&(console.log("sending GA event 'Timeless post impression' for post id "+s+" page source "+r),timelessPostImpressionGAEvent(s,t,i,o,r,n))},1e3,e.target))})},{threshold:1});e.forEach(function(e){s.observe(e)})}function timelessPostImpressionGAEvent(e,s,t,i,o,n){e={post_id:e,sport_category:t,title:s.replace(/-/gi," "),taxonomy:i,page_source:o,sequence:n};gtag("event","Timeless post impression",e)}function getRandomCounterForTimelessWidget(){for(var e=0,s=1;s<=10;s++)e=Math.max(Math.floor(10*Math.random()+1),Date.now().toString().split("").reverse()[0]);return e}function updateTimelessPostStories(e){var e=GOTHAM_URL_HA_FRONTEND+"/admin/timeless/"+e+"?lang="+LANG+"&limit=10&shuffle=true&ctr="+getRandomCounterForTimelessWidget(),t=MINIMUM_TIMELESS_POSTS_RENDER_COUNT;pureJSAjaxGet(e,function(e){try{var s=(responseJSON=JSON.parse(e)).posts||[];if(s.length<t)return;renderTimelessPosts(s)}catch(e){return void console.error(e)}},function(e){console.error(e)},!0)}var sportPageType=pageType;function renderTimelessPosts(e){var s="",s="Homepage"==sportPageType?"Home_page_Tab":"Sportspage"==sportPageType?"Sports_page":"Story_Page_Tab",t=$(".timless-posts-layout"),i=$("#timeless-posts-list"),o=$(".timeless-posts-anchors #right"),n=$(".timeless-posts-anchors #left");if(t&&(showHideTimelessSectionByPosts(e,t),i&&(i.innerHTML="",0<e.length))){for(var r=0;r<e.length;r++)i.innerHTML+="<div class='one-story timeless-story' data-post-id='"+e[r].post_id+"' data-post-sport-category-slug='"+e[r].sport_category_slug+"' data-post-slug='"+e[r].slug+"' data-post-taxonomy='"+e[r].taxonomy+"'><a href="+e[r].permalink.toString()+' onclick=\'timelessPostGaEvent(this, "post", '+e[r].post_id+', "'+e[r].sport_category_slug+'", "'+e[r].slug+'", "'+e[r].taxonomy+'", "'+e[r].permalink+"\")'><div class='one-story-mast' style='background-image: url("+getImageHeightTransformedURL(e[r].thumbnail,290)+")'></div><div class='title-background-layer'><h4>"+e[r].title+"</h4></div></a></div>";adjustTimelessPostContainerWidth(e,i,o),addTimelessPostScrollListener(i,o,n),trackTimelessPostImpressions(s)}}function shuffleTimelessPosts(e){updateTimelessPostStories(e),trackTimelessPostShuffleEvent(e)}function trackTimelessPostShuffleEvent(e){gtag("event","Clicks_Timeless_shuffle",{page_type:sportPageType,sport_category:e})}