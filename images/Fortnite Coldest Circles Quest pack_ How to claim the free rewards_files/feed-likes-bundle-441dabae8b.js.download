var tempLikedArticles,userId=getCurrentUserID(),LOCAL_STORAGE_LIKED_ARTICLES_KEY="LIKEDARTICLES",likedArticlesLS=("Tagpage"==pageType&&(LOCAL_STORAGE_LIKED_ARTICLES_KEY="LIKEDTAXONOMY"),JSON.parse(localStorage.getItem(LOCAL_STORAGE_LIKED_ARTICLES_KEY)||"{}")),REACTION_IMAGES=(Array.isArray(likedArticlesLS)&&(tempLikedArticles={},likedArticlesLS.forEach(function(e){tempLikedArticles[e]="like"}),localStorage.removeItem(LOCAL_STORAGE_LIKED_ARTICLES_KEY),localStorage.setItem(LOCAL_STORAGE_LIKED_ARTICLES_KEY,JSON.stringify(tempLikedArticles)),likedArticlesLS=JSON.parse(localStorage.getItem(LOCAL_STORAGE_LIKED_ARTICLES_KEY))),{like:STATIC_URL+"/post-reactions/reaction-like.svg",excited:STATIC_URL+"/post-reactions/reaction-excited.svg",happy:STATIC_URL+"/post-reactions/reaction-happy.svg",anxious:STATIC_URL+"/post-reactions/reaction-anxious.svg",angry:STATIC_URL+"/post-reactions/reaction-angry.svg",sad:STATIC_URL+"/post-reactions/reaction-sad.svg",default:STATIC_URL+"/skm/assets/feed/ic-like-gray.svg"}),REACTION_TEXT={like:"Liked",excited:"Excited",happy:"Happy",anxious:"Anxious",angry:"Angry",sad:"Sad",default:"Like"};function showReactionsFeed(e){if("false"!=e.dataset.reactionType)feedUnreact(e);else{var t=e.parentElement.querySelectorAll(".reaction-icons-container");if(t&&t.length)for(var a=0;a<t.length;a++)t[a].classList.remove("hidden")}}function makeFeedReactApiRequest(e,t,a){var i,n,r=a.dataset.id;r&&(parseInt(a.parentElement.previousElementSibling.dataset.likesCount||"0"),i="true"===a.parentElement.previousElementSibling.dataset.liked,n=a.parentElement.previousElementSibling.dataset.reactionType,pureJSAjaxPost(e,t,function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return}var e=e.like;a.parentElement.previousElementSibling.dataset.feed||updateAllLikeActionBtns(a.parentElement.previousElementSibling,e),e!==i&&(updateLocalStorageValue(e,r,n),a.parentElement.previousElementSibling.setAttribute("data-liked",e),e=e?"feed_"+n:"feed_undoing_"+n,a.parentElement.previousElementSibling.dataset.type&&SOCIAL_POST_TYPES.includes(a.parentElement.previousElementSibling.dataset.type)?trackSocialPostLike(a,e.concat("_",a.parentElement.previousElementSibling.dataset.type)):trackPostLike(a,e))},function(e){console.log("error is: ",e)},null,!0))}function makedFeeUnreactApiRequest(e,t,a){var i,n,r=a.dataset.id;r&&(parseInt(a.dataset.likesCount||"0"),i="true"===a.dataset.liked,n=a.dataset.reactionType,a.setAttribute("data-reaction-type",!1),pureJSAjaxPost(e,t,function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return}var e=e.like;a.dataset.feed||updateAllLikeActionBtns(a,e),e!==i&&(updateLocalStorageValue(e,r,n),a.setAttribute("data-liked",e),e=e?"feed_"+n:"feed_undoing_"+n,a.dataset.type&&SOCIAL_POST_TYPES.includes(a.dataset.type)?trackSocialPostLike(a,e.concat("_",a.dataset.type)):trackPostLike(a,e))},function(e){console.log("error is: ",e)},null,!0))}function toggleFeedLike(e){var t,a,i,n,r,s=e.dataset.id;s&&(t=e.dataset.type,r=parseInt(e.parentElement.previousElementSibling.dataset.likesCount||"0"),e.parentElement.previousElementSibling.dataset.liked,a=e.parentElement.previousElementSibling.querySelector("img"),i=document.querySelector("#likes-count-"+s),s=GOTHAM_URL_HA_FRONTEND+"/posts/"+s+"/reaction",n={reacted:!0,reaction:t},r=r,updateCount(i,r+=1,t,!0),e.parentElement.previousElementSibling.setAttribute("data-likes-count",r),e.parentElement.previousElementSibling.setAttribute("data-reaction-type",t),toggleLikeImage(a,n.reaction),makeFeedReactApiRequest(s,n,e))}function feedUnreact(e){var t,a,i,n,r=e.dataset.id;r&&(t=e.dataset.reactionType,n=parseInt(e.dataset.likesCount||"0"),e.dataset.liked,a=e.querySelector("img"),i=document.querySelector("#likes-count-"+r),r=GOTHAM_URL_HA_FRONTEND+"/posts/"+r+"/reaction",n=n,updateCount(i,--n,t,!(i={reacted:!1,reaction:t})),e.setAttribute("data-likes-count",n),toggleLikeImage(a,!1),makedFeeUnreactApiRequest(r,i,e))}function updateLocalStorageValue(e,t,a){userId||(e?likedArticlesLS[t]=a:likedArticlesLS[t.toString()]&&delete likedArticlesLS[t.toString()],localStorage.setItem(LOCAL_STORAGE_LIKED_ARTICLES_KEY,JSON.stringify(likedArticlesLS)))}function toggleLikeImage(e,t){e&&(t?(e.src=REACTION_IMAGES[t],e.nextElementSibling.innerText=REACTION_TEXT[t],e.nextElementSibling.style.color="#D32F2F"):(e.src=REACTION_IMAGES.default,e.nextElementSibling.innerText=REACTION_TEXT.default,e.nextElementSibling.style.color="#A7A7A7"))}function updateCount(e,t,a,i){var n,r;e&&(n=e.parentElement.querySelectorAll("img"),t<1?(e.innerText="",n.length&&n[0].remove()):1==t?1==n.length?e.innerText=getReactionUpdateText(e,t):0==n.length?((r=document.createElement("img")).src=STATIC_URL+"/post-reactions/reaction-"+a+".svg",r.className="first-reaction",r.setAttribute("data-reaction",a),r.height="12",r.width="12",r.alt="reaction-emoji",e.parentElement.insertBefore(r,e),e.innerText=getReactionUpdateText(e,t)):1<n.length&&(n[1].remove(),e.innerText=getReactionUpdateText(e,t)):1==n.length?(n[0].dataset.reaction!=a&&((r=document.createElement("img")).src=STATIC_URL+"/post-reactions/reaction-"+a+".svg",r.className="second-reaction",r.setAttribute("data-reaction",a),r.height="12",r.width="12",e.parentElement.insertBefore(r,e)),e.innerText=getReactionUpdateText(e,t)):1<n.length&&(i||n[1].dataset.reaction!=a||n[1].remove(),e.innerText=getReactionUpdateText(e,t)))}function getReactionUpdateText(e,t){return e.parentElement.classList.contains("social-trends-reaction-holder")?getNumFormat(t):getNumFormat(t)+(1<t?" Reactions":" Reaction")}function trackSocialPostLike(e,t){var a,i,n,r;gtag&&(a={event_category:"Social_post",page_url:window.location.href},i=e.dataset.id,n=SK_URL+e.dataset.url,r=IS_DESKTOP,(e=e.closest(".social-reaction-info"))&&(e=e.getAttribute("data-sequence"))&&(a.sequence=Number(e)+1),i&&(a.event_label=i),n&&(a.destination_url=n),a.device=r?"Desktop":"Mobile",gtag("event",t,a))}function trackPostLike(e,t){var a,i,n;gtag&&(a={event_category:"post",page_url:window.location.href},i=e.dataset.id,e=SK_URL+e.dataset.url,n=IS_DESKTOP,i&&(a.event_label=i),e&&(a.destination_url=e),a.device=n?"Desktop":"Mobile",gtag("event",t,a))}function actionHover(e){hasClass(e,"like-action")&&"false"==e.querySelector("button").dataset.reactionType?e.querySelector("img").setAttribute("src",STATIC_URL+"/skm/assets/feed/ic-like-red-new.svg"):hasClass(e,"comment-action")?e.querySelector("img").setAttribute("src",STATIC_URL+"/skm/assets/feed/ic-comment-red.svg"):hasClass(e,"share-action")&&e.querySelector("img").setAttribute("src",STATIC_URL+"/skm/assets/feed/ic-share-red.svg")}function actionUnhover(e){hasClass(e,"like-action")&&"false"==e.querySelector("button").dataset.reactionType?e.querySelector("img").setAttribute("src",STATIC_URL+"/skm/assets/feed/ic-like-gray.svg"):hasClass(e,"comment-action")?e.querySelector("img").setAttribute("src",STATIC_URL+"/skm/assets/feed/ic-comment-gray.svg"):hasClass(e,"share-action")&&e.querySelector("img").setAttribute("src",STATIC_URL+"/skm/assets/feed/ic-share-gray.svg")}window.addEventListener("mouseup",function(){var e=$all(".reaction-icons-container");if(e&&e.length)for(var t=0;t<e.length;t++)-1===Array.from(e[t].classList).indexOf("hidden")&&e[t].classList.add("hidden")});